<mvc:View
    controllerName="sap.btp.sapui5.controller.View2"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
>
    <Page
        id="Breakdown"
        title="Breakdown"
    >
        <content>
        <!-- Display order Image -->
            <VBox
                id="_IDGenVBox3"
                justifyContent="Center"
                alignContent="Center"
                class="sapUiSmallMarginTopBottom sapUiLargeMarginBeginEnd"
            >
                <HBox
                    id="_IDGenHBox1"
                    width="100%"
                    justifyContent="Center"
                    alignContent="Center"
                    class="sapUiSmallMarginAuto"
                >
                    <VBox id="_IDGenVBox4">
                        <Image
                            id="_IDGenImage"
                            src="/view/image/{viewForView2>/OrderNumber}.png"
                            height="200px"
                            width="200px"
                            visible="true"
                        />
                    </VBox>
                </HBox>
            </VBox>

            <Text
                id="_IDGenText7"
                text="Order ID: {viewForView2>/OrderNumber}"
            />

            <!-- path is used to navigate to deep structures
            our data was inside Prod which was inside returnedOrder
             -->

            <Table
                id="myTable1"
                items="{path: 'returnedOrder>/Prod' }"
                visible="true"
            >
                <columns>
                    <Column
                        id="_IDGenColumn7"
                        visible="true"
                    >
                        <Text
                            id="_IDGenText12"
                            text="OrderID"
                        />
                    </Column>
                    <Column
                        id="_IDGenColumn4"
                        visible="true"
                    >
                        <Text
                            id="_IDGenText2"
                            text="Product ID"
                        />
                    </Column>
                    <Column
                        id="_IDGenColumn5"
                        visible="true"
                    >
                        <Text
                            id="_IDGenText8"
                            text="Quantity"
                        />
                    </Column>
                    <Column
                        id="_IDGenColumn6"
                        visible="true"
                    >
                        <Text
                            id="_IDGenText9"
                            text="Unit Price"
                        />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem
                        id="_IDGenColumnListItem2"
                        visible="true"
                    >
                        <cells>
                            <Text
                                id="_IDGenText13"
                                text="{returnedOrder>OrderID}"
                                visible="true"
                            />
                            <Link
                                id="_IDGenLink"
                                text="{returnedOrder>ProductID}"
                                visible="true"
                            />
                            <Text
                                id="_IDGenText10"
                                text="{returnedOrder>Quantity}"
                                visible="true"
                            />
                            <Text
                                id="_IDGenText11"
                                text="{returnedOrder>UnitPrice}"
                                visible="true"
                            />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

            <!-- HANDLING DEEP NESTED TABLES IN JSON MODELS -->

            <!-- Prod is an array and needs to be bound to a table -->
            <!-- 
            we can however display single entries with array indices - not recommended
            Arrays must use tables or lists to be displayed -->
            <Text
                id="_IDGenText16"
                text=" Customer : {returnedOrder>/Prod/0/Order/CustomerID}"
                visible="true"
            />

            <!-- Table loops over Prod array and gets the objects
            we can navigate to required property : Order and get further details  -->
            <!-- items="{path: ' must always hold a path to the array of results Prod is an array[] -->
            <Table
                id="_IDGenTable"
                items="{path: 'returnedOrder>/Prod' }"
                visible="true"
            >
                <columns>
                    <Column id="_IDGenColumn">
                        <Text
                            id="_IDGenText15"
                            text="Customer"
                        />
                    </Column>
                    <Column id="_IDGenColumn8">
                        <Text
                            id="_IDGenText19"
                            text="Required By"
                        />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem
                        id="_IDGenColumnListItem3"
                        visible="true"
                    >
                        <cells>
                            <Text
                                id="_IDGenText14"
                                text="{returnedOrder>Order/CustomerID}"
                                visible="true"
                            />
                            <Text
                                id="_IDGenText20"
                                text="{returnedOrder>Order/RequiredDate}"
                                visible="true"
                            />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
